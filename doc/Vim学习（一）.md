# 内容概要

# 参考文献
1. [vim-mode介绍](https://www.cnblogs.com/zzqcn/p/4619012.html)
1. [vim-visual-copy](https://vim.fandom.com/wiki/Cut/copy_and_paste_using_visual_selection)
1. [vim的搜索与替换](https://www.cnblogs.com/zzqcn/p/4687577.html)
1. [vim的分割窗口与标签页](https://www.cnblogs.com/zzqcn/p/4788754.html)

# 1. Vim模式
Vim一共有4个模式：
* 正常模式(Normal mode)
* 插入模式(Insert mode)
* 命令模式(Command mode)
* 可视模式(Visual mode)

## 1.1 正常模式
正常模式一般用于浏览文件，也包括一些复制、粘贴、删除等操作。这时击键时，一般的键/键组合会被当成功能键，而不会键入对应的字符。

启动vim后默认位于正常模式。
## 1.2 插入模式
在正常模式中按下i, I, a, A等键会进入插入模式。
个人觉得只用记住按i键和a键就好。插入模式中，击键时会写入相应的字符。
```
* i : 插入位置在当前字符之前
* a : 插入位置在当前字符之后
```

## 1.3 命令模式
在正常模式中，按下：（冒号）键，会进入命令模式。在命令模式中可以执行
一些输入并执行一些vim或插件提供的指令，就像在shell里一样。这些指令包括设置环境、文件操作、调用某个功能等等。

## 1.4 可视模式
在正常模式按下v, V, <Ctrl>+v，可以进入可视模式。可视模式中的
操作有点像拿鼠标进行操作，选择文本的时候有一种鼠标选择的即视感，有时候会很方便。
## 1.5 回到正常模式
不论在其他什么模式下，按一次或两次<Esc>键都可以回到正常模式。在正常模式中，h,j,k,l与方向箭头对应：
* h: 左 
* j: 下 
* k: 上
* l: 右
> 记忆技巧：\
> 假设我们使用的是qwert键盘，在hjkl键中，h键位于最左边，l键位于最右边，j的形状像一个向下的勾，k可以理解为king，高高在上。

# 2. 打开/创建文件和退出
## 2.1 打开或创建一个文件
```sh
$ vim <file-name>
```
## 2.2 退出
* 无修改退出：  冒号 + q
* 修改后保存退出： 冒号 + wq
* 修改后丢弃修改退出： 冒号 + q!

# 3. 正常模式下的常见操作
## 3.1 光标定位
### 3.1.1 字符定位
```
* h : 左移一个字符
* l : 右移一个字符
* f<c> : 移动到本行下一个字符<c>
* F<c> : 移动到本行上一个字符<c>
```
### 3.1.2 单词定位
```
* w ： 移动到下一个单词的开头
* b : 移动到上一个单词的开头
* e : 移动到当前单词的末尾
* * : 移动到下一个相同单词
* # : 移动到上一个相同单词
* g* : 跳转到下一个包含当前单词的单词处
* g# : 跳转到上一个包含当前单词的单词处
```
### 3.1.3 行定位
```
* j : 向下移动一行
* k : 向上移动一行
* 0 : 移动到行首
* ^ : 移动到行首的第一个非空白字符
* $ : 移动到行尾
* <n>| : 移动到当前行第n列，比如12|是移动到当前行第12列
* <n>G : 移动到第<n>行，比如12G是移动到第12行
```
### 3.1.4 屏幕定位
```
* H : 移动到屏幕最上面一行
* L : 移动到屏幕最下面一行
* M : 移动到屏幕中间一行
* <Ctrl>+e : 屏幕向下滚动一行，光标不动
* <Ctrl>+y : 屏幕向上滚动一行，光标不动
* zt : 将当前行移动到屏幕顶端
* zb : 将当前行移动到屏幕底端
* zz : 将当前行移动到屏幕中间
```
### 3.1.5 页面定位
```
* <Ctrl>+f : 向下滚动一页
* <Ctrl>+b : 向上滚动一页
* <Ctrl>+d : 向下滚动半页
* <Ctrl>+u : 向上滚动半页
```
### 3.1.6 文件定位
```
* gg : 移动到文件开头
* G : 移动到文件末尾
* <n>% : 移动到文件n%处，比如30%是定位到文件30%处
```
### 3.1.7 光标定位的前进/回退
```
<Ctrl>+i : 跳到下一次光标位置
<Ctrl>+o : 跳到上一次光标位置
```

## 3.2 查看字符编码
```
ga : 查看光标处字符的ascii码
g8 : 查看光标处字符的utf-8编码
```

# 4. 常用编辑操作
**复制**
```
yw ： 复制光标后的一个单词
yy : 复制当前行
<n>yy : 复制以下n行
```
> 复制选中内容： \
> 将光标移动（击键）到要复制内容的开始，按下v进入可视模式，移动光标（击键）选中要拷贝的内容，按p拷贝，按d剪切


**剪切/删除**
```
dw : 剪切光标后的一个单词
dd : 剪切当前行
<dd> : 剪切以下n行
x : 剪切当前字符
X : 剪切前一个字符
```

**粘贴**
```
p : 将剪切板中的内容粘贴到光标后
P : 将剪切班中的内容粘贴到光标前
```

**撤销与重做**
```
u : 撤销
<Ctrl>+r : 重做
```

**缩进**
```
>> : 当前行向右缩进
<< : 当前行向左缩进
<n>>> : 以下n行向右缩进
<n><< : 以下n行向左缩进
<n>== : 自动调整以下n行的缩进
gg=G : 自动调整文件所有行的缩进
```

**替换单个字符**
```
r : 按下后，再输入字符将替换当前字符
R : 按下后，进入替换模式，讲一次替换之后的字符
```

**大小写转换**
```
～ ： 转换当前字符的大小写
guw : 将光标后的单词变为小写
gUw : 将管标后的单词变为大写
guu : 将当前行全部变为小写
gUU : 将当前行全部变为大写
```


# 5. 搜索
```
* : 向下搜索光标所在处的单词
# : 向上搜索光标所在处的单词
/<pattern> : 向下搜索模式<pattern>
?<pattern> : 向上搜索模式<pattern>
/\c<pattern> : 不区分大小写向下搜索模式<pattern>
？\c<pattern> : 不区分大小写向上搜索模式<pattern>
/\C<pattern> : 区分大小写向下搜索模式<pattern>
？\C<pattern> : 区分大小写向上搜索模式<pattern>
:noh : 取消搜索后的高亮结果
```
> n跳转到下一个匹配对象，N跳转到上一个匹配对象。gg+n可跳转到第一个匹配对象，G+N可跳转到最后一个匹配对象。

# 6. 替换
将scope范围内匹配pattern的所有字符替换为str，option为可选参数
```
<scope>s/<pattern>/<str>[/<option>]
```
举例
```
:%s/abc/xyz/gc
```
将当前文件中所有abc替换为xyz，并在替换前进行确认

选项g：替换每一行所有abc，如果不加只替换第一个 \
选项c：替换前询问用户进行确认

用户可以选择y确认，
n否认并跳到下一个匹配，q停止，a不要再询问了全部yes

# 7. 其他常用命令
```
:set ic : 设定为不区分大小写的搜索模式
:set noic :设定为区分大小写的搜索模式
```
> ic是ignorecase的缩写
```
:set nu : 显示行号
:set nonu : 不显示行号
```